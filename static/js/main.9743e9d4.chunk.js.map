{"version":3,"sources":["Test/Test.js","PixiViz/PixiViz.js","Utilities/Utilities.js","App.js","serviceWorker.js","index.js"],"names":["projection","pixiApp","viewport","container","Utilities","size","minScale","maxScale","simulation","d3","stop","emoji","clampZoomOptions","Test","props","state","data","componentNode","this","_rootNode","then","csv","byDates","key","d","entries","raw_data","length","values","console","log","fitSize","window","innerWidth","innerHeight","translate","scale","center","forEach","r","point","long","lat","x","y","i","categories","c","ii","obj","denominazione_regione","find","dd","Math","random","push","setState","svg","g","append","call","extent","scaleExtent","on","attr","transform","nodes","selectAll","enter","text","emoji_dictionary","category","alphaDecay","prompt","force","_x","_y","strength","iterations","alpha","confirm","index","vx","vy","blob","Blob","JSON","stringify","type","FileSaver","saveAs","restart","spatialization","document","title","toFixed","requestAnimationFrame","addEventListener","event","a","ref","_setRef","bind","style","width","height","Component","dpr","devicePixelRatio","PixiViz","loadData","textures","icons","querySelectorAll","html2canvas","backgroundColor","canvas","id","toDataURL","Object","keys","PIXI","resolution","autoResize","appendChild","view","Viewport","passiveWheel","stopPropagation","divWheel","screenWidth","screenHeight","worldWidth","worldHeight","interaction","renderer","plugins","clampZoom","drag","pressDrag","clampWheel","pinch","wheel","stage","addChild","sprite","from","anchor","set","fontSize","position","top","map","App","className","basename","path","exact","to","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.9743e9d4.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport FileSaver from 'file-saver';\n\nimport Utilities from '../Utilities/Utilities';\n\nconst data_url = 'https://raw.githubusercontent.com/pcm-dpc/COVID-19/master/dati-regioni/dpc-covid19-ita-regioni.csv';\nconst simulation = d3.forceSimulation()\n    .stop();\n\nconst size = Utilities.emoji.size/Utilities.clampZoomOptions.maxScale;\n\nlet projection;\n\nclass Test extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      data: []\n    }\n  }\n  _setRef(componentNode) {\n    this._rootNode = componentNode;\n  }\n  componentDidMount() {\n    d3.csv(data_url).then(csv=>{\n\n      // csv = csv.filter(d=>d.denominazione_regione==='Sicilia'||d.denominazione_regione===\"Valle d'Aosta\"||d.denominazione_regione===\"Lazio\")\n      // csv = csv.filter(d=>d.denominazione_regione==='Lazio')\n\n      const byDates = d3.nest()\n        .key(d=>d.data)\n        .entries(csv);\n      \n      const raw_data = byDates[byDates.length-1].values;\n      console.log(raw_data);\n      const data = [];\n\n      projection = d3.geoConicEqualArea()\n        .fitSize([window.innerWidth -200, window.innerHeight-200], this._rootNode)\n        .translate([window.innerWidth / 2, window.innerHeight / 2])\n        .scale(3000)\n        .center([12.368775000000001, 42.9451139]);\n\n      raw_data.forEach(r=>{\n        const point = projection([r.long,r.lat]);\n        r.x = point[0];\n        r.y = point[1];\n      })\n\n      for(let i=0; i<raw_data.length; ++i) {\n        Utilities.categories.forEach(c=>{\n          for (let ii=0; ii<raw_data[i][c]; ++ii){\n            const obj={\n              'category': c,\n              'denominazione_regione': raw_data[i].denominazione_regione,\n              'date': raw_data[i].data,\n              '_x': raw_data.find(dd=>dd.denominazione_regione===raw_data[i].denominazione_regione).x,\n              '_y': raw_data.find(dd=>dd.denominazione_regione===raw_data[i].denominazione_regione).y,\n              'x': window.innerWidth*Math.random(),\n              'y': window.innerHeight*Math.random()\n            }\n            data.push(obj);\n          }\n        })\n      }\n      this.setState({raw_data:raw_data, data:data}, ()=>{\n\n        const svg = d3.select(this._rootNode);\n        const g = svg.append('g');\n          \n        svg.call(d3.zoom()\n          .extent([[0, 0], [window.innerWidth, window.innerHeight]])\n          .scaleExtent([Utilities.clampZoomOptions.minScale, Utilities.clampZoomOptions.maxScale])\n          .on(\"zoom\", zoomed));\n\n        function zoomed() {\n          g.attr(\"transform\", d3.event.transform);\n        }\n\n        let nodes = g.selectAll('text').data(this.state.data).enter().append('text')\n          .attr('font-size',size+'px')\n          .text(d=>Utilities.emoji_dictionary[d.category]);\n\n        const alphaDecay = window.prompt('Set the alpha decay of force simulation', 0.005);\n\n        simulation.nodes(data)\n          .force(\"x\", d3.forceX(d=>d._x))\n          .force(\"y\", d3.forceY(d=>d._y))\n          .force(\"charge\", d3.forceManyBody().strength(-0.08))\n          .force(\"collision\", d3.forceCollide(size/2*0.9).iterations(4))\n          .alphaDecay(alphaDecay)\n          .alpha(1)\n          .on(\"end\", () => {\n            nodes\n              .attr('x',d=>d.x)\n              .attr('y',d=>d.y);\n            console.log('ended',data);\n\n            if (window.confirm(\"🌺🌿☘️🌼🌸 download spatialized data?\")) {\n              for (let i=0; i<data.length; ++i){\n                data[i]._x = data[i].x;\n                data[i]._y = data[i].y;\n                delete data[i].index;\n                delete data[i].vx;\n                delete data[i].vy;\n                delete data[i].x;\n                delete data[i].y;\n              }\n              var blob = new Blob([JSON.stringify(data)], {type: \"application/json;charset=utf-8\"});\n              FileSaver.saveAs(blob, \"covi-z.json\");\n            }\n\n          })\n          .restart();\n\n        spatialization()\n        function spatialization() {\n          if (simulation.alpha() > 0.1) {\n            document.title = simulation.alpha().toFixed(4);\n\n            nodes\n              .attr('x',d=>d.x)\n              .attr('y',d=>d.y);\n\n            requestAnimationFrame(spatialization)\n          }\n        }\n\n        document.addEventListener(\"keypress\", async function(event){\n          if (event.key==='r') {\n            simulation.alpha(0.5).restart();\n          }\n        });\n      })\n    })\n  }\n  render() {\n    console.log(this.state.data);\n    return <svg ref={this._setRef.bind(this)} style={{ width:'100%', height:'100%'}}></svg>;\n  }\n}\n\nexport default Test;\n","import React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport * as PIXI from \"pixi.js\";\nimport { Viewport } from \"pixi-viewport\";\nimport html2canvas from 'html2canvas';\n\nimport Utilities from '../Utilities/Utilities';\n\nlet pixiApp, viewport, container,\n    width = window.innerWidth,\n    height = window.innerHeight,\n    dpr = window.devicePixelRatio || 1,\n    size = Utilities.emoji.size;\n\nclass PixiViz extends Component {\n  constructor(props) {\n    super(props);\n    this.loadData = this.loadData.bind(this);\n\n    this.state = {\n      textures: {}\n    }\n  }\n\n  loadData(){\n    return d3.json('./data/covi-z.json')\n  }\n\n  componentDidMount() {\n    const initPixiApp = () => {\n      console.log(this.state)\n      pixiApp = new PIXI.Application({\n        width: width,\n        height: height,\n        backgroundColor: 0xfafafa,\n        resolution: dpr,\n        autoResize: true\n      });\n      this._rootNode.appendChild(pixiApp.view);\n  \n      // create viewport and add it to the stage\n      viewport = new Viewport({\n        center: new PIXI.Point(-window.innerWidth/2, -window.innerHeight/2),\n        passiveWheel: false,\n        stopPropagation: true,\n        divWheel: this._rootNode,\n        screenWidth: window.innerWidth,\n        screenHeight: window.innerHeight,\n        worldWidth: window.innerWidth,\n        worldHeight: window.innerHeight,\n        interaction: pixiApp.renderer.plugins.interaction // the interaction module is important for wheel to work properly when renderer.view is placed or scaled\n      });\n      viewport\n        // .moveCenter(window.innerWidth/2,window.innerHeight/2)\n        .clampZoom(Utilities.clampZoomOptions)\n        .drag({pressDrag:true, clampWheel:true})\n        .pinch()\n        .wheel()\n      pixiApp.stage.addChild(viewport);\n  \n      container = new PIXI.Container();\n      viewport.addChild(container);\n  \n      this.loadData().then( data =>{\n\n        for (let i=0; i<data.length; ++i) {\n\n          // create a new Sprite from an image path\n          const sprite = PIXI.Sprite.from(this.state.textures[data[i].category]);\n\n          // center the sprite's anchor point\n          sprite.anchor.set(0.5);\n\n          // move the sprite to the center of the screen\n          sprite.x = data[i]._x;\n          sprite.y = data[i]._y;\n          sprite.scale.x = 1/dpr/Utilities.clampZoomOptions.maxScale;\n          sprite.scale.y = 1/dpr/Utilities.clampZoomOptions.maxScale;\n\n          // sprite.scale.x = 0.1;\n          // sprite.scale.y = 0.1;\n\n          container.addChild(sprite);\n        }\n      });\n    }\n\n    const icons = document.querySelectorAll('#textures-generation>span');\n    const textures = {};\n    for (let i=0; i<icons.length; ++i) {\n      html2canvas(icons[i],{backgroundColor:null}).then((canvas)=>{\n        textures[icons[i].id] = canvas.toDataURL(\"image/png\");\n        if (Object.keys(textures).length === Object.keys(Utilities.emoji_dictionary).length) {\n          this.setState({textures:textures},()=>{\n            initPixiApp();\n          })\n        }\n      });\n    }\n\n  }\n  _setRef(componentNode) {\n    this._rootNode = componentNode;\n  }\n  render() {\n    return <div style={{width:'100%',height:'100%'}} ref={this._setRef.bind(this)}>\n      {true && \n        //Object.keys(this.state.textures).length===0\n        <div id=\"textures-generation\" style={{fontSize:size+'px',position:'absolute', top:'10px'}}>\n          { Object.keys(Utilities.emoji_dictionary).map(d=>{\n            return <span id={d} key={`emoji-${d}`}>{Utilities.emoji_dictionary[d]}</span>\n          }) }\n        </div>\n      }\n    </div>;\n  }\n}\n\nexport default PixiViz;\n","const Utilities = {}\n\nUtilities.emoji = {\n    size: 20\n}\n\nUtilities.clampZoomOptions = {\n    minScale:0.5,\n    maxScale:10\n}\n\nUtilities.emoji_dictionary = {\n    \"dimessi_guariti\": '🍀',\n    \"isolamento_domiciliare\": '💮',\n    \"ricoverati_con_sintomi\": '🌼',\n    \"terapia_intensiva\": '🌸',\n    \"deceduti\": '🌺'\n};\n\nUtilities.categories = [\n    \"ricoverati_con_sintomi\",\n    \"terapia_intensiva\",\n    // \"totale_ospedalizzati\",\n    \"isolamento_domiciliare\",\n    // \"totale_attualmente_positivi\",\n    // \"nuovi_attualmente_positivi\",\n    \"dimessi_guariti\",\n    \"deceduti\",\n    // \"tamponi\"\n  ]\n\nexport default Utilities;\n","import React from 'react';\nimport { HashRouter, Route, Link } from \"react-router-dom\";\nimport './App.css';\n\nimport Test from './Test';\nimport PixiViz from './PixiViz';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <HashRouter basename=\"/\">\n        <Route path=\"/svg\">\n          <Test />\n        </Route>\n        <Route path=\"/pixi\">\n          <PixiViz />\n        </Route>\n        <Route exact path=\"/\">\n          {\n            <nav>\n              <ul>\n                <li>\n                  <Link to=\"/svg\">SVG Version</Link>\n                </li>\n                <li>\n                  <Link to=\"/pixi\">PIXIjs version</Link>\n                </li>\n              </ul>\n            </nav>\n          }\n        </Route>\n      </HashRouter>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}